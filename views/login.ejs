<style>
    main {
        display: flex;
        background: #343a40;
        width: 100%;
        min-height: 100vh;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 24px;
    }
    .logo {
        display: flex;
        align-items: center;
        font-size: 36px;
    }
    .login {
        width: 400px;
    }
    .login .card-body {
        display: flex;
        flex-wrap: wrap;
    }
    .title {
        flex: 1;
    }
    #loginForm {
        flex: 100%;
    }
    .dropdown .box::after {
        content: none;
    }
    .dropdown .box svg {
        width: 20px;
        height: 20px;
    }
</style>

<div class="logo text-white">
    <i class="fa-solid fa-graduation-cap mr-3"></i>
    <h2 class="m-0">Learning Management System</h2>
</div>
<div class="login card">
    <div class="card-body">
        <h4 class="title">Login</h4>
        <div class="dropdown">
            <button class="box btn dropdown-toggle" type="button" data-toggle="dropdown">
                <svg viewBox="0 0 16 16" fill="#000000">
                    <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                </svg>
            </button>
            <div class="menu dropdown-menu dropdown-menu-right">
                <div class="dropdown-item disabled">
                    <div>Default admin:</div>
                    <div>email: admin@admin.com</div>
                    <div>password: admin</div>
                </div>
            </div>
        </div>
        <form id="loginForm">
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="text" class="form-control" id="email" name="email"  value="admin@admin.com">
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" class="form-control" id="password" name="password" value="admin" required>
            </div>
            <p class="error"></p>
            <button type="submit" class="btn btn-primary">Login</button>
        </form>
    </div>
</div>

<script>
    $(document).ready(() => {
        $('#loginForm').on('submit', event => {
            event.preventDefault()
            const data = $.getFormData('#loginForm')
            $.ajax({
                url: '/api/user/login',
                method: 'POST',
                data,
                success: response => {
                    console.log('response', response)
                    if (response.success) {
                        localStorage.setItem('token', response.data.token)
                        window.location.href = '/dashboard'
                    } else {
                        $('.error').html(response.message)
                    }
                },
            })
        })
    })
</script>
